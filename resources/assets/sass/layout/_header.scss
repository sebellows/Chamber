//// Global Site Header

.site-header {
  background-color: color(brand);
  padding-top: $site-header-height-small;
  position: relative;
  // z-index: 1200;

  @include breakpoint(medium) {
    // padding-top: $site-header-height;
    padding-top: 86px;
    padding-top: 0;
  }

  @include breakpoint(large) {
    padding-top: 0;
  }
}

.site-branding {
  background-color: $white;
  color: $white;
  height: $site-header-height-small;
  padding: 10px 15px;
  position: absolute;
  top: 0; left: 0;
  -webkit-filter: drop-shadow(0 10px 0 rgba(0,51,85,0.2));
  filter: drop-shadow(0 10px 0 rgba(0,51,85,0.2));
  z-index: 1;

  &:after {
    content: "";
    display: block;
    background-color: transparent;
    border-left: 50px solid currentColor;
    border-top: 40px solid transparent;
    border-bottom: 80px solid transparent;
    position: absolute;
    top: 0;
    right: -50px;
  }

  @include breakpoint(medium) {
    height: $site-header-height;
    padding: 16px 30px;

    &:after {
      border-top: 50px solid transparent;
      border-bottom: 90px solid transparent;
    }
  }

  @include breakpoint(medium) {
    float: left;
    // needed to prevent top page content from being pushed right
    margin-bottom: -20px;
    position: relative;
  }
}

.site-logo {
  display:block;
  font-family: sans-serif;
  line-height: 0;
  max-width: 315px;
  text-decoration:none;

  @include breakpoint(large down) {
    max-width: 275px;
  }
}

// Site Description
// located in `.top-bar-top .top-bar-left`
.site-description {
  display: block;
  padding-right: 1rem;
  position: absolute;
  top: 75px;
  z-index: 1;

  @include breakpoint(small down) {
    max-width: 200px;
  }

  @include breakpoint(medium) {
    // position: absolute;
    // top: -70px;
    // left: 400px;
  }

  @include breakpoint(medium) {
    display: table-cell;
    vertical-align: middle;
    position: relative;
    top: auto; left: auto;
  }
}

.site-header {
  .top-bar {
    background-color: color(brand);
    color: $white;
    // display: block;
    flex-wrap: wrap;
    align-items: center;
    position: relative;

    .top-bar-left,
    .top-bar-right {
      flex: 0 0 auto;
    }

    @include breakpoint(small only) {
      justify-content: flex-start;
      padding-left: $gutterMediumHalf;
      padding-right: $gutterMediumHalf;
    }

    @include breakpoint(medium) {
      justify-content: space-between;
      padding-left: 65px;
    }

    // @media (min-width: em(755px)) {
    // @include breakpoint(xlarge) {
    //   padding-left: 65px;
    // }

    @include breakpoint(xlarge) {
      height: 60px;
    }
  }

    .top-bar-left {
      @include breakpoint(xlarge) {
        display: table;
      }
    }

    // @media (min-width: em(1025px)) {
    @include breakpoint(xlarge) {
      .top-bar-right { float: right; }
    }

  /// Bottom instance of Foundation's `top-bar`
  //  contains Contact Information, Searchform, and Dept-Navigation `menu-toggle`
  .top-bar--bottom {
    background-color: color(brand-dark);

    @include breakpoint(medium down) {
      justify-content: flex-end;
    }
  }

}

/// Contact Info Text Widget

// <dl>
.site-contact {
  color: inherit;
  margin: 0;

  @include breakpoint(xlarge) {
    margin-right: auto;
  }

  a {
    color: currentColor;
  }
}

@mixin is-toggled() {
  $bg: transparentize($black, .1);

  background: $bg;
  // color: $black;
  display: block !important;
  padding: 3px 7px;
  position: absolute;
  top: 40px;
  text-align: center;
  white-space: nowrap;
  filter: drop-shadow(0 2px 6px $black);
  z-index: 1;
  @include horizontal-center;

  &::before {
    @include css-triangle(10px, $bg, up);
    margin: -12px auto auto auto;
    position: relative;
    // TODO: bug in Foundation triangle's where only one direction has `border-style` applied
    border-style: solid;
  }
}

// <dd>
.site-contact-info {
  background-color: transparent;
  font-weight: 400;
  position: relative;

  span {
    font-size: em(12px);
  }

  @include breakpoint(medium down) {
    border-radius: 8px;
    box-shadow: none;
    color: $white;
    display: inline-block;
    height: ($site-search-field-height - px-calc($topbar-padding * 2));
    padding: em(9px) em(12px);
    transition: all .3s;

    &:active,
    &:focus {
      @include is-toggled;
    }
  }

  @include breakpoint(large) {
    &:first-of-type {
      margin-right: rem-calc(8);
      padding-left: 0;
    }

    span { font-size: em(14); }

    .icon { margin-right: rem-calc(4); }
  }
}

@include breakpoint(medium down) {
  .site-contact .is-toggled,
  .no-touchevents .site-contact-info:hover span:last-of-type {
    @include is-toggled;
  }

  .no-touchevents {
    .contact-toggle {
      background: transparent;
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      z-index: 1;
    }
  }
}

